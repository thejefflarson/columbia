<html>
  <head>
    <title>Class Three | Intro to GIS</title>
    <link rel="stylesheet" href="../stylesheets/reset.css">
    <link rel="stylesheet" href="../stylesheets/tachyons.min.css">
    <link rel="stylesheet" href="../stylesheets/tweaks.css">
    <script src="../javascripts/d3.js"></script>
    <script src="../javascripts/topojson.min.js"></script>
    <script src="../javascripts/wicket.js"></script>
  </head>
  <body class="sans-serif center fl pa5 dark-gray f5 lh-copy w-100">
    <h2 class="fw8 f4 ttu lh-title silver tracked">Last Week's homework</h2>
    <p class="pv2 measure-wide">
      In order to receive a grade for last week's homework please choose
      <b class="b">Project > Save as Image</b> in QGIS. Email that image to
      me, at <a href="mailto:jal2301@columbia.edu">jal2301@columbia.edu</a>.
    </p>
    <h2 class="fw8 f4 ttu lh-title silver tracked">Reading and Writing Shapefiles in Python</h2>
    <p class="pv2 measure-wide">
      We're going to use the <a href="">Fiona</a> package that provides a nice
      interface to <a href="http://gdal.org/1.11/ogr/">OGR</a>.
    </p>
    <p class="pb2 measure-wide">
      Here's a replacement for <tt>ogrinfo</tt>:
    </p>
    <pre id="read.py">
    </pre>
    <p class="pb2 measure-wide">
      And here's how two copy one shapefile to another:
    </p>
    <pre id="copy.py">
    </pre>
    <h2 class="fw8 f4 ttu lh-title silver tracked">Spatial Operations</h2>
    <h3 class="fw8 f2">Intersection</h3>
    <div id="buffer"></div>
    <pre class="code overflow-scroll bg-near-white pa2 pre">
>>> from shapely.wkt import loads, dumps
>>> dumps(loads('POINT (0 0)').buffer(10))
POLYGON ((10.0000000000000000 0.0000000000000000, 9.9518472667219697 -0.9801714032956050, 9.8078528040323043 -1.9509032201612808 ...</pre>

    <div id="bounding-box"></div>
    <pre class="code overflow-scroll bg-near-white pa2">
>>> from shapely.wkt import loads
>>> loads('MULTIPOINT ((0 0), (0 0.5), (1.2 1), (5.5 6))').bounds
(0.0, 0.0, 5.5, 6.0)</pre>

    <div id="envelope"></div>
    <pre class="code overflow-scroll bg-near-white pa2">
>>> from shapely.wkt import loads
>>> loads('MULTIPOINT ((0 0), (0 0.5), (1.2 1), (5.5 6))').envelope
'POLYGON ((0.0000000000000000 0.0000000000000000, 5.0000000000000000 0.0000000000000000, 5.0000000000000000 1.0000000000000000, 0.0000000000000000 1.0000000000000000, 0.0000000000000000 0.0000000000000000))'</pre>
    <div id="convex-hull"></div>
    <pre class="code overflow-scroll bg-near-white pa2">
>>> from shapely.wkt import loads, dumps
>>> dumps(loads('MULTIPOINT ((0 0), (0 0.5), (1.2 1), (5.5 6), (7.7 5.5), (-1.0 10))').convex_hull)
'POLYGON ((0.0000000000000000 0.0000000000000000, -1.0000000000000000 10.0000000000000000, 7.7000000000000002 5.5000000000000000, 0.0000000000000000 0.0000000000000000))'</pre>

    <div id="union"></div>
    <pre class="code overflow-scroll bg-near-white pa2">
>>> from shapely.geometry import Point
>>> from shapely.wkt import loads, dumps
>>> dumps(Point(0, 0).buffer(1.5).union(Point(0,1).buffer(1.5)))
'POLYGON ((1.5000000000000000 0.0000000000000000, 1.4927770900082953 -0.1470257104943408, 1.4711779206048456 -0.2926354830241921, 1.4354105035983133 -0.4354270158816932, 1.3858192987669304 -0.5740251485476341, 1.3228818965225329 -0.7070951052389958, 1.2472044184538182 -0.8333553495294026, 1.1595156800441062 -0.9515899262454675, 1.0606601717798223 -1.0606601717798205, 0.9515899262454695 -1.1595156800441044, 0.8333553495294048 -1.2472044184538169, 0.7070951052389979 -1.3228818965225317, 0.5740251485476362 -1.3858192987669296, 0.4354270158816953 -1.4354105035983127, 0.2926354830241945 -1.4711779206048452, 0.1470257104943431 -1.4927770900082951, 0.0000000000000024 -1.5000000000000000, -0.1470257104943383 -1.4927770900082955, -0.2926354830241897 -1.4711779206048461, -0.4354270158816907 -1.4354105035983142, -0.5740251485476318 -1.3858192987669313, -0.7070951052389935 -1.3228818965225342, -0.8333553495294006 -1.2472044184538196, -0.9515899262454659 -1.1595156800441073, -1.0606601717798192 -1.0606601717798234, -1.1595156800441035 -0.9515899262454702, -1.2472044184538165 -0.8333553495294055, -1.3228818965225315 -0.7070951052389985, -1.3858192987669293 -0.5740251485476366, -1.4354105035983127 -0.4354270158816954, -1.4711779206048452 -0.2926354830241942, -1.4927770900082953 -0.1470257104943426, -1.5000000000000000 -0.0000000000000015, -1.4927770900082953 0.1470257104943395, -1.4711779206048461 0.2926354830241912, -1.4354105035983136 0.4354270158816926, -1.4123059204384314 0.5000000000000000, -1.4354105035983127 0.5645729841183046, -1.4711779206048452 0.7073645169758058, -1.4927770900082953 0.8529742895056575, -1.5000000000000000 0.9999999999999984, -1.4927770900082953 1.1470257104943395, -1.4711779206048461 1.2926354830241913, -1.4354105035983136 1.4354270158816926, -1.3858192987669304 1.5740251485476340, -1.3228818965225329 1.7070951052389960, -1.2472044184538182 1.8333553495294028, -1.1595156800441058 1.9515899262454679, -1.0606601717798214 2.0606601717798210, -0.9515899262454689 2.1595156800441049, -0.8333553495294044 2.2472044184538169, -0.7070951052389980 2.3228818965225315, -0.5740251485476368 2.3858192987669291, -0.4354270158816962 2.4354105035983125, -0.2926354830241956 2.4711779206048448, -0.1470257104943447 2.4927770900082948, -0.0000000000000043 2.5000000000000000, 0.1470257104943362 2.4927770900082957, 0.2926354830241872 2.4711779206048465, 0.4354270158816880 2.4354105035983151, 0.5740251485476289 2.3858192987669327, 0.7070951052389904 2.3228818965225360, 0.8333553495293973 2.2472044184538218, 0.9515899262454622 2.1595156800441102, 1.0606601717798154 2.0606601717798272, 1.1595156800440998 1.9515899262454750, 1.2472044184538127 1.8333553495294110, 1.3228818965225280 1.7070951052390051, 1.3858192987669260 1.5740251485476442, 1.4354105035983102 1.4354270158817040, 1.4711779206048434 1.2926354830242035, 1.4927770900082942 1.1470257104943526, 1.5000000000000000 1.0000000000000124, 1.5000000000000000 1.0000000000000000, 1.4927770900082953 0.8529742895056592, 1.4711779206048456 0.7073645169758078, 1.4354105035983133 0.5645729841183068, 1.4123059204384314 0.5000000000000000, 1.4354105035983102 0.4354270158817039, 1.4711779206048434 0.2926354830242035, 1.4927770900082942 0.1470257104943527, 1.5000000000000000 0.0000000000000124, 1.5000000000000000 0.0000000000000000))'</pre>

    <div id="difference"></div>
    <pre class="code overflow-scroll bg-near-white pa2">
>>> from shapely.geometry import Point
>>> from shapely.wkt import loads, dumps
>>> dumps(Point(0, 0).buffer(1.5).difference(Point(0,1).buffer(1.5)))
'POLYGON ((1.5000000000000000 0.0000000000000000, 1.4927770900082953 -0.1470257104943408, 1.4711779206048456 -0.2926354830241921, 1.4354105035983133 -0.4354270158816932, 1.3858192987669304 -0.5740251485476341, 1.3228818965225329 -0.7070951052389958, 1.2472044184538182 -0.8333553495294026, 1.1595156800441062 -0.9515899262454675, 1.0606601717798223 -1.0606601717798205, 0.9515899262454695 -1.1595156800441044, 0.8333553495294048 -1.2472044184538169, 0.7070951052389979 -1.3228818965225317, 0.5740251485476362 -1.3858192987669296, 0.4354270158816953 -1.4354105035983127, 0.2926354830241945 -1.4711779206048452, 0.1470257104943431 -1.4927770900082951, 0.0000000000000024 -1.5000000000000000, -0.1470257104943383 -1.4927770900082955, -0.2926354830241897 -1.4711779206048461, -0.4354270158816907 -1.4354105035983142, -0.5740251485476318 -1.3858192987669313, -0.7070951052389935 -1.3228818965225342, -0.8333553495294006 -1.2472044184538196, -0.9515899262454659 -1.1595156800441073, -1.0606601717798192 -1.0606601717798234, -1.1595156800441035 -0.9515899262454702, -1.2472044184538165 -0.8333553495294055, -1.3228818965225315 -0.7070951052389985, -1.3858192987669293 -0.5740251485476366, -1.4354105035983127 -0.4354270158816954, -1.4711779206048452 -0.2926354830241942, -1.4927770900082953 -0.1470257104943426, -1.5000000000000000 -0.0000000000000015, -1.4927770900082953 0.1470257104943395, -1.4711779206048461 0.2926354830241912, -1.4354105035983136 0.4354270158816926, -1.4123059204384314 0.5000000000000000, -1.3858192987669293 0.4259748514523634, -1.3228818965225315 0.2929048947610015, -1.2472044184538165 0.1666446504705945, -1.1595156800441035 0.0484100737545298, -1.0606601717798192 -0.0606601717798234, -0.9515899262454659 -0.1595156800441073, -0.8333553495294006 -0.2472044184538196, -0.7070951052389935 -0.3228818965225342, -0.5740251485476318 -0.3858192987669313, -0.4354270158816907 -0.4354105035983142, -0.2926354830241897 -0.4711779206048461, -0.1470257104943383 -0.4927770900082955, 0.0000000000000024 -0.5000000000000000, 0.1470257104943431 -0.4927770900082951, 0.2926354830241945 -0.4711779206048452, 0.4354270158816953 -0.4354105035983127, 0.5740251485476362 -0.3858192987669296, 0.7070951052389979 -0.3228818965225317, 0.8333553495294048 -0.2472044184538169, 0.9515899262454695 -0.1595156800441044, 1.0606601717798223 -0.0606601717798205, 1.1595156800441062 0.0484100737545325, 1.2472044184538182 0.1666446504705974, 1.3228818965225329 0.2929048947610042, 1.3858192987669304 0.4259748514523659, 1.4123059204384314 0.5000000000000000, 1.4354105035983102 0.4354270158817039, 1.4711779206048434 0.2926354830242035, 1.4927770900082942 0.1470257104943527, 1.5000000000000000 0.0000000000000124, 1.5000000000000000 0.0000000000000000))'</pre>
    <div id="intersection"></div>
    <pre>
>>> from shapely.geometry import Point
>>> from shapely.wkt import loads, dumps
>>> dumps(Point(0, 0).buffer(1.5).intersection(Point(0,1).buffer(1.5)))
'POLYGON ((-1.4123059204384314 0.5000000000000000, -1.3858192987669304 0.5740251485476339, -1.3228818965225329 0.7070951052389959, -1.2472044184538182 0.8333553495294029, -1.1595156800441058 0.9515899262454679, -1.0606601717798214 1.0606601717798212, -0.9515899262454689 1.1595156800441049, -0.8333553495294044 1.2472044184538169, -0.7070951052389980 1.3228818965225317, -0.5740251485476368 1.3858192987669293, -0.4354270158816962 1.4354105035983125, -0.2926354830241956 1.4711779206048450, -0.1470257104943447 1.4927770900082948, -0.0000000000000043 1.5000000000000000, 0.1470257104943362 1.4927770900082957, 0.2926354830241872 1.4711779206048465, 0.4354270158816880 1.4354105035983149, 0.5740251485476289 1.3858192987669327, 0.7070951052389904 1.3228818965225357, 0.8333553495293973 1.2472044184538220, 0.9515899262454622 1.1595156800441102, 1.0606601717798154 1.0606601717798272, 1.1595156800440998 0.9515899262454750, 1.2472044184538127 0.8333553495294110, 1.3228818965225280 0.7070951052390051, 1.3858192987669260 0.5740251485476442, 1.4123059204384314 0.5000000000000000, 1.3858192987669304 0.4259748514523659, 1.3228818965225329 0.2929048947610042, 1.2472044184538182 0.1666446504705974, 1.1595156800441062 0.0484100737545325, 1.0606601717798223 -0.0606601717798205, 0.9515899262454695 -0.1595156800441044, 0.8333553495294048 -0.2472044184538169, 0.7070951052389979 -0.3228818965225317, 0.5740251485476362 -0.3858192987669296, 0.4354270158816953 -0.4354105035983127, 0.2926354830241945 -0.4711779206048452, 0.1470257104943431 -0.4927770900082951, 0.0000000000000024 -0.5000000000000000, -0.1470257104943383 -0.4927770900082955, -0.2926354830241897 -0.4711779206048461, -0.4354270158816907 -0.4354105035983142, -0.5740251485476318 -0.3858192987669313, -0.7070951052389935 -0.3228818965225342, -0.8333553495294006 -0.2472044184538196, -0.9515899262454659 -0.1595156800441073, -1.0606601717798192 -0.0606601717798234, -1.1595156800441035 0.0484100737545298, -1.2472044184538165 0.1666446504705945, -1.3228818965225315 0.2929048947610015, -1.3858192987669293 0.4259748514523634, -1.4123059204384314 0.5000000000000000))'</pre>
    <h2 class="fw8 f4 ttu lh-title silver tracked">Spatial Queries</h2>
    <h2 class="fw8 f4 ttu lh-title silver tracked">Joining Shapefiles</h2>
    <p>

    </p>
    <h2 class="fw8 f4 ttu lh-title silver tracked">Homework</h2>
  </body>
</html>
